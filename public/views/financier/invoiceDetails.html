<!-- START CONTAINER -->
<div class="page-container row-fluid container-fluid">
    <!-- START CONTENT -->
        <div>
            <div class="col-md-9 has-float-label">
                <select class="soflow form-control input-lg" ng-model="invoiceData.state" ng-options=" x for x in stateOptions">
                </select>
            </div>
        </div>
    <section>
        <div class="container wrapper main-wrapper row" style=''>

            <div class='col-xs-12'>
                <div class="page-title">

                    <div class="pull-left">
                        <!-- PAGE HEADING TAG - START -->
                        <h1 class="title"><a ng-href="/dashboard">Dashboard</a><span class="request-details">Request Details #{{invoiceData.invoiceNo}}</span> <span class="date-details">{{invoiceData.created.invoice_created | date : "dd MMM y, hh:mm"}}</span></h1>
                        <!-- PAGE HEADING TAG - END -->
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            <!-- MAIN CONTENT AREA STARTS -->

            <div class="col-xs-12 col-md-9 col-lg-9">
                <section class="box">

                    <div class="content-body">
                        <header class="panel_header">
                            <h5 class="text-light pull-left text-uppercase">Supplier</h5>
                        </header>
                        <div class="row">
                            <div class="col-md-12">
                                <div id="buyer-header">
                                    <img src="assets/images/logos/buyer/crossref.jpg" alt="" class="img-circle circle-border">

                                    <div class="info-details">
                                        <h1 class="buyer-title">{{invoiceData.supplierName}}</h1>

                                        <ul class="list-unstyled list-inline no-bottom-marg">
                                            <li class="text-muted"><i class="fa fa-user"></i> {{invoiceData.supplierName}}</li>
                                            <li class="text-muted"><i class="fa fa-phone"></i> +91 9665664587</li>
                                            <li><a href="#" class="text-muted"><i class="fa fa-envelope"></i>{{invoiceData.supplierEmail}}</a></li>
                                        </ul>

                                    </div>
                                </div>

                                <header class="panel_header">
                                    <h5 class="text-light pull-left text-uppercase">Buyer</h5>
                                </header>

                                    <div id="buyer-header">
                                        <img src="assets/images/logos/buyer/crossref.jpg" alt="" class="img-circle circle-border">

                                        <div class="info-details">
                                            <h1 class="buyer-title">{{invoiceData.companyName}}</h1>

                                            <ul class="list-unstyled list-inline no-bottom-marg">
                                                <li class="text-muted"><i class="fa fa-user"></i> {{invoiceData.contactName}}</li>
                                                <li class="text-muted"><i class="fa fa-phone"></i> {{invoiceData.companyPhone}}</li>
                                                <li><a href="#" class="text-muted"><i class="fa fa-envelope"></i> {{invoiceData.companyEmail}}</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="purchase-details">
                                        <h5 class="text-light text-uppercase">Purchase Details</h5>

                                        <h1>{{invoiceData.purchaseTitle}}</h1>
                                        <div class="price-badge">
                                            <div class="amount text-muted">Amount : <span class="bold"><i class="fa fa-inr" aria-hidden="true"></i> {{invoiceData.purchaseAmount}}</span></div>
                                            <div class="period text-muted">Days to Payout : <span class="bold">{{getDatesDiff(invoiceData.payableDate)}} Days</span></div>
                                        </div>
                                    </div>

                            </div>

                                <div class="col-lg-4 col-sm-4 col-xs-12">
                                    <div class="price-pack">
                                        <div class="head no-bottom-padd">
                                            <h3>PO Details</h3>
                                        </div>
                                        <ul class="item-list list-unstyled">
                                            <li>#{{invoiceData.purchaseNo}}</li>
                                            <li>{{invoiceData.purchaseDate}}</li>
                                            <li><strong>${{invoiceData.purchaseAmount}}</strong></li>

                                        </ul>

                                        <button type="button" class="btn btn-lg btn-icon btn-default btn-block">10delinvoice.pdf <i class="fa fa-download"></i></button>

                                    </div>
                                </div>

                                <div class="col-lg-4 col-sm-4 col-xs-12">
                                    <div class="price-pack">
                                        <div class="head no-bottom-padd">
                                            <h3>Invoice Details</h3>
                                        </div>
                                        <ul class="item-list list-unstyled">
                                            <li>#{{invoiceData.invoiceNo}}</li>
                                            <li>{{invoiceData.invoiceDate}}</li>
                                            <li><strong>${{invoiceData.invoiceAmount}}</strong></li>

                                        </ul>

                                        <button type="button" class="btn btn-lg btn-icon btn-default btn-block">10delinvoice.pdf <i class="fa fa-download"></i></button>

                                    </div>
                                </div>

                                <div class="col-lg-4 col-sm-4 col-xs-12">
                                    <div class="price-pack">
                                        <div class="head no-bottom-padd">
                                            <h3>Grn Details</h3>
                                        </div>

                                        <ul class="item-list list-unstyled">
                                            <li>#{{invoiceData.grnNo}}</li>
                                            <li>{{invoiceData.grnDate}}</li>
                                            <li>{{invoiceData.grnAmount}}</li>

                                        </ul>

                                        <button type="button" class="btn btn-lg btn-icon btn-default btn-block">10delinvoice.pdf <i class="fa fa-download"></i></button>

                                    </div>
                                </div>

                            <div class="clearfix"></div>

                            <div class="col-md-12">

                                <div class="verification-details">
                                    <h5 class="text-uppercase">Verification Details</h5>
                                    <div class="price-badge">
                                        <div class="amount text-muted">Approved Transaction no : <span class="bold">#1234567898765432145, 21 Dec 2018, 16:30</span></div>
                                    </div>
                                    <div class="verification-details box">
                                        <h1>A36ABGHYTWSDOP3DFRTQAZXCDCE3012A292BC1KLMNBPOTCVFS2C5F163BKLMNPH</h1></div>
                                </div>

                                <div class="verification-details">
                                    <h5 class="text-uppercase">Factoring Details</h5>
                                    <div class="price-badge">
                                        <div class="amount text-muted">Amount : <span class="bold"><i class="fa fa-inr" aria-hidden="true"></i> 1,00,000</span></div>
                                    </div>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
                                </div>

                            </div>

                        </div>
                        <!-- End .row -->
                    </div>
                </section>
            </div>

            <div class="col-xs-12 col-md-3 col-lg-3">
                <section class="box">
                    <div class="content-body">
                        <div class="row">
                            <!-- Factor Now -->
                            <!-- financier-factor-now.html -->
                            <!-- need api..used  factoringProposal-->
                            <div class="col-md-12" ng-show="factorFlags.proceedIfactorRequest">
                                <h3 class="f-w-6">Factor Now</h3>
                                <p class="f-w-6">Mode</p>
                                <!-- [ Togglable tabs ] -->
                                <div class="btn-group" data-toggle="btns">
                                    <a class="btn btn-round btn-border btn-lg btn-primary active" data-toggle="tab">Factor</a>
                                    <a class="btn btn-round btn-border btn-lg btn-primary" data-toggle="tab">Finance</a>
                                </div>

                                <!-- Tab panes -->
<!-- 
                                acceptFactoringForm.platformCharges : 0,
                                acceptFactoringForm.saftyPercentage : 0,
                                acceptFactoringForm.acceptFactoringRemark : ''
 -->                                
                                <p class="f-w-6">Factoring charges(%)</p>
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="number" name="charges" ng-model="acceptFactoringForm.platformCharges" class="form-control input-lg"/>
                                    </div>
                                </div>

                                <p class="f-w-6"> Factor Range(%)</p>
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="number" name="charges" ng-model="acceptFactoringForm.saftyPercentage" class="form-control input-lg"/>
                                    </div>
                                </div>

                                <div class="tab-content">
                                    <div class="tab-pane active" id="first">Factor Range slider will comes here</div>
                                    <div class="tab-pane" id="second">Finance Range slider will comes here</div>
                                </div>
                                <div class="transaction-details no-bottom-padd">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <textarea ng-model="acceptFactoringForm.remark" rows="3" class="form-control input-lg" id="description" placeholder="Write Terms & Condition"></textarea>
                                        </div>
                                    </div>

                                    <div class="m-b-20">
                                        <p class="text-muted">Attachment</p>
                                        <div class="form-group">

                                            <button type="button" class="btn btn-default btn-icon btn-round">
                                                <i class="fa fa-cloud-upload"></i> &nbsp; <span>Browse File</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <button ng-click="factoringProposal()" class="btn btn-lg btn-primary btn-corner btn-block">Submit Now</button>
                                    </div>
                                </div>
                            </div>

                            <!-- What would you like to do factoring for this request? -->
                            <!-- financier-factor-request-from-supplier.html -->
                            <!-- need api..used acceptFactoringProposal, rejectFactoringProposal -->
                            <div class="col-md-12" ng-show="isIfactorRequested()">
                                <div class="transaction-details">
                                    <div class="clearfix"></div>

                                    <h1 class="f-w-4">What would you like to do factoring for this request?</h1>
                                    <div>
                                        <div class="form-group">
                                            <button class="btn btn-lg btn-primary btn-corner btn-block" ng-click="proceedRequest()">Proceed</button>
                                        </div>
                                        <div class="form-group no-bottom-marg">
                                            <button type="submit" class="btn btn-lg btn-border btn-primary btn-corner btn-block" ng-click="rejectRequest()">Reject</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- rejected by you -->
                            <!-- financier-factor-request-rejected-by-financier.html -->
                            <!-- no api.. -->
                            <div class="col-md-12" ng-show="invoiceData.state == 'ifactor_rejected'">
                                <div id="buyer-header-rejected">
                                    <i class="fa fa-times icon-rounded icon-primary inviewport"></i>

                                    <div class="info-details">
                                        <h1 class="buyer-title text-uppercase">Rejected By You</h1>
                                        <p class="f-w-6">{{invoiceData.rejectFactoringRemark}}</p>
                                    </div>
                                </div>

                                <div class="transaction-details">
                                    <h5 class="text-light text-uppercase">Date</h5>
                                    <div class="clearfix"></div>
                                    <h1 class="no-bottom-padd">{{invoiceData.created.ifactor_rejected | date : "dd MMM y, hh:mm"}}</h1>
                                    <div>
                                    </div>

                                </div>
                            </div>

                            <!-- factoring proposed -->
                            <div class="col-md-12" ng-show="invoiceData.state == 'ifactor_proposed'">
                                <div id="buyer-header-rejected">
                                    <i class="fa fa-times icon-rounded icon-primary inviewport"></i>

                                    <div class="info-details">
                                        <h1 class="buyer-title text-uppercase">Factoring Proposed</h1>

                                    </div>
                                </div>

                                <div class="transaction-details">
                                    <h5 class="text-light text-uppercase">Date</h5>
                                    <div class="clearfix"></div>

                                    <h1 class="no-bottom-padd">{{invoiceData.created.ifactor_proposed | date : "dd MMM y, hh:mm"}}</h1>
                                    <div>
                                    </div>
                                </div>
                            </div>

                            <!-- pay now -->
                            <!-- financier-pay-now.html -->
                            <!-- need api..used  -->
                            <div class="col-md-12" ng-show="invoiceData.state == 'ifactor_proposed'">
                                <div id="buyer-header-sent">
                                    <i class="fa"><img src="assets/images/dollar-briefcase.png"></i>

                                    <div class="info-details">
                                        <h1 class="buyer-title text-uppercase">Factoring Details</h1>

                                    </div>
                                </div>
                                <div class="transaction-details no-bottom-padd">

                                    <div class="m-b-20">
                                        <p class="text-muted text-uppercase">Mode</p>
                                        <p class="f-w-6">Factor</p>
                                    </div>

                                    <div class="m-b-20">
                                        <p class="text-muted text-uppercase">Factoring Charges/Month (%)</p>
                                        <p class="f-w-6">{{invoiceData.charges}}</p>
                                    </div>

                                    <div class="m-b-20">
                                        <p class="text-muted text-uppercase">Eligible Amount (%)</p>
                                        <p class="f-w-6">{{invoiceData.firstPayment}}</p>
                                    </div>

                                    <div class="m-b-20">
                                        <p class="text-muted text-uppercase">Terms &amp; Condition</p>
                                        <p class="f-w-6">{{invoiceData.acceptFactoringRemark}}</p>
                                    </div>

                                    <div class="m-b-20">
                                        <p class="text-muted text-uppercase">Attachment</p>
                                        <p class="f-w-6"><a href="#" class="attachment-btn">Factor.pdf <i class="fa fa-download"></i></a></p>
                                    </div>

                                    <!-- <div class="form-group">
                                        <button type="submit" ng-click="prepaySupplier()" class="btn btn-lg btn-primary btn-corner btn-block">Pay Now</button>
                                    </div> -->

                                </div>
                            </div>

                            <!-- Proposal accepted -->
                            <div class="content-body" ng-show="invoiceData.state == 'ifactor_proposal_accepted'">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h4 class="m-b-20 f-w-6 text-uppercase text-primary">Pay Now</h4>
                                        <div>

                                            <div class="transaction-details m-b-10">
                                                <p class="text-muted text-uppercase">Total Amount</p>
                                                <h1 class="f-w-4 no-bottom-padd">{{invoieData.invoiceAmount}}</h1>
                                            </div>
     
                                            <div class="transaction-details m-b-10">
                                                <p class="text-muted text-uppercase">Eligible Amount ({{invoiceData.saftyPercentage}})</p>
                                                <h1 class="f-w-4 no-bottom-padd">{{invoiceData.firstPayment}}</h1>
                                            </div>

                                            <div class="transaction-details m-b-10">
                                                <p class="text-muted text-uppercase">XDC To USD</p>
                                                <h1 class="f-w-4 no-bottom-padd">$ 1</h1>
                                            </div>
                                            
                                            <hr>

                                            <div class="transaction-details m-b-10">
                                                <p class="text-muted text-uppercase">Payable XDC</p>
                                                <h1 class="f-w-4 no-bottom-padd">{{invoiceData.firstPayment}}</h1>
                                            </div>

                                            <div class="form-group">
                                                <button type="submit" ng-click="prepaySupplier()" class="btn btn-lg btn-primary btn-corner btn-block">Pay Now</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- prepayment done -->
                            <div class="content-body" ng-show="invoiceData.state == 'ifactor_prepaid'||invoiceData.state == 'invoice_paid' || invoiceData.state == 'completed'">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div id="buyer-header-approved" ng-show="invoiceData.state == 'invoice_paid'">
                                            <i class="fa fa-times icon-rounded icon-primary inviewport visible"></i>

                                            <h4 class="m-b-20 f-w-6 text-uppercase text-primary">Pay Now</h4>
                                        </div>

                                        <div id="buyer-header-approved" ng-show="invoiceData.state == 'ifactor_prepaid'">
                                            <i class="fa fa-times icon-rounded icon-primary inviewport visible"></i>
                                            <div class="info-details">
                                                <h1 class="buyer-title text-uppercase">Payment Successful</h1>
                                            </div>
                                        </div>
                                        
                                        <div class="transaction-details">
                                                <h5 class="text-dark">Total Amount <span class="text-dark">${{invoiceData.firstPayment}}</span></h5>
                                                <div class="clearfix"></div>
                                                <h5 class="text-dark">First Payment <span class="text-dark">$ {{invoiceData.firstPayment}}</span></h5>
                                                <div class="clearfix"></div>
                                                <h5 class="text-dark">Charges <span class="text-dark">$ {{invoiceData.charges}}</span></h5>
                                                <div class="clearfix"></div>
                                                <h5 class="text-dark">Days to Payout <span class="text-dark">{{invoiceData.daysToPayout}}</span></h5>
                                                <hr>
                                                <div class="clearfix"></div>
                                                <h5 class="text-dark f-w-6">Balance Amount <span class="text-dark">${{invoiceData.balancePayment}}</span></h5>
                                                <div>
                                                </div>
                                                
                                                <p class="f-size-12">Estimated Amount-Processing Charges ( After deducting Factoring Charges )</p>
                                                <div class="clearfix"></div>
                                                <hr>
                                                <h5 class="text-dark f-w-6">Balance XDC <span class="text-dark">${{invoiceData.balancePayment}}</span></h5>
                                            </div>

                                        <div class="transaction-details m-b-10">
                                            <p class="text-muted text-uppercase">Address</p>
                                             <h1 class="f-size-14 no-bottom-padd">{{invoiceData.buyerAddress}}</h1>
                                            <div>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-show="invoiceData.state == 'ifactor_prepaid'">
                                            <button type="submit" class="btn btn-lg btn-primary btn-corner btn-block">Request Payment</button>
                                        </div>
                                        <div class="form-group" ng-show="invoiceData.state == 'invoice_paid' && invoiceData.state != 'completed'">
                                            <button type="submit" class="btn btn-lg btn-primary btn-corner btn-block" ng-click="postpaySupplier()">Pay Now</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- reject form -->
                            <div class="col-md-12" ng-show="factorFlags.rejectIfactorRequest">
                                <div id="buyer-header-rejected">
                                    <i class="fa fa-times icon-rounded icon-primary inviewport"></i>
                                    <div class="info-details">
                                        <h1 class="buyer-title text-uppercase">Rejected</h1>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group">
                                            <textarea ng-model="proposalActionForm.remark" rows="3" class="form-control input-lg" id="description" placeholder="Remark"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <button type="submit" ng-click="rejectFactoringRequest()" class="btn btn-lg btn-primary btn-corner btn-block">Submit Now</button>
                                </div>
                            </div>
                        </div>
                        <!-- End .row -->
                    </div>
                </section>
            </div>
            <!-- MAIN CONTENT AREA ENDS -->
        </div>
    </section>
    <!-- END CONTENT -->

</div>
<!-- END CONTAINER -->
